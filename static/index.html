<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Portfolio Management Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div id="app">
    <header>
      <h1>ðŸ“Š Portfolio Management Dashboard</h1>
      <div id="auth-info" class="hidden">
        <span id="welcome"></span>
        <button id="logoutBtn">Logout</button>
      </div>
    </header>

    <main>
      <section id="auth-section">
        <div class="card">
          <h2>Login</h2>
          <form id="loginForm">
            <label>Username <input type="text" id="username" required></label>
            <label>Password <input type="password" id="password" required></label>
            <button type="submit">Login</button>
          </form>
          <p class="muted">Default admin user: <code>admin / admin123</code></p>
          <details>
            <summary>Register a new user</summary>
            <form id="registerForm">
              <label>Username <input type="text" id="rusername" required></label>
              <label>Password <input type="password" id="rpassword" required></label>
              <button type="submit">Register</button>
            </form>
          </details>
        </div>
      </section>

      <section id="dashboard" class="hidden">
        <div class="grid">
          <div class="card">
            <h2>Overview</h2>
            <div id="totals"></div>
            <div id="byType"></div>
          </div>
          <div class="card">
            <h2>Add / Edit Investment</h2>
            <form id="invForm">
              <input type="hidden" id="inv_id">
              <label>Type
                <select id="inv_type" required>
                  <option value="stock">Stock</option>
                  <option value="bond">Bond</option>
                  <option value="mutual fund">Mutual Fund</option>
                </select>
              </label>
              <label>Symbol <input type="text" id="inv_symbol" placeholder="AAPL"></label>
              <label>Name <input type="text" id="inv_name" required placeholder="Apple Inc."></label>
              <label>Current Price <input type="number" step="0.0001" id="inv_price" required></label>
              <div class="row gap">
                <button type="submit">Save Investment</button>
                <button type="button" id="invReset">Clear</button>
              </div>
            </form>
          </div>
        </div>

        <div class="card">
          <div class="row space-between">
            <h2>Investments</h2>
            <button id="refreshBtn">Refresh</button>
          </div>
          <table id="invTable">
            <thead>
              <tr>
                <th>Type</th><th>Symbol</th><th>Name</th><th>Qty</th>
                <th>Avg Buy</th><th>Current</th><th>Value</th>
                <th>P/L</th><th>P/L %</th><th>Actions</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div class="card">
          <h2>Add Transaction</h2>
          <form id="txForm">
            <label>Investment
              <select id="tx_inv" required></select>
            </label>
            <label>Type
              <select id="tx_type" required>
                <option value="BUY">BUY</option>
                <option value="SELL">SELL</option>
              </select>
            </label>
            <label>Quantity <input type="number" step="0.0001" id="tx_qty" required></label>
            <label>Price <input type="number" step="0.0001" id="tx_price" required></label>
            <label>Date <input type="datetime-local" id="tx_date" required></label>
            <button type="submit">Add Transaction</button>
          </form>
        </div>

        <div class="card">
          <div class="row space-between"><h2>Transaction History</h2>
            <button id="txRefreshBtn">Refresh</button></div>
          <table id="txTable">
            <thead>
              <tr>
                <th>Date</th><th>Investment</th><th>Type</th><th>Qty</th><th>Price</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>
    </main>
  </div>
  <script src="/app.js"></script>
</body>
</html>
